/**
 * Base CSS with Tailwind Directives
 * Minimal reset and base styles for the game
 * Requirements: 1.1, 1.3
 */

@import "tailwindcss";

/* Custom Theme Variables for Tailwind v4 */
@theme {
  /* Game Colors - Light Mode */
  --color-game-primary: #FF4500;
  --color-game-primary-hover: #E03D00;
  --color-game-primary-light: #FFE6D9;
  --color-game-accent: #FFD700;
  --color-game-accent-hover: #E6C200;
  --color-game-background: #FFF8F0;
  --color-game-card: #FFFFFF;
  
  /* Dark Mode - Layered Background System */
  --color-dark-base: #0f1419;
  --color-dark-bg: #1a2332;
  --color-dark-surface: #243044;
  --color-dark-elevated: #2d3a4f;
  --color-dark-hover: #3a4a62;
  
  /* Dark Mode - Text Hierarchy */
  --color-dark-text-primary: rgba(255, 255, 255, 0.95);
  --color-dark-text-secondary: rgba(255, 255, 255, 0.7);
  --color-dark-text-muted: rgba(255, 255, 255, 0.5);
  --color-dark-text-disabled: rgba(255, 255, 255, 0.3);
  
  /* Dark Mode - Borders */
  --color-dark-border: rgba(255, 255, 255, 0.12);
  --color-dark-border-light: rgba(255, 255, 255, 0.08);
  --color-dark-border-focus: rgba(240, 208, 120, 0.5);
  
  /* Dark Mode - Accent Colors */
  --color-dark-gold: #f0d078;
  --color-dark-gold-hover: #f5dc8c;
  --color-dark-blue: #5a7fc2;
  --color-dark-blue-hover: #6a8fd2;

  /* Success Colors */
  --color-success-light: #E8F5E9;
  --color-success: #22C55E;
  --color-success-dark: #16A34A;
  --color-success-text: #166534;

  /* Error Colors */
  --color-error-light: #FFEBEE;
  --color-error: #EF4444;
  --color-error-dark: #DC2626;
  --color-error-text: #B91C1C;

  /* Warning Colors */
  --color-warning-light: #FFF3E0;
  --color-warning: #F59E0B;
  --color-warning-dark: #D97706;
  --color-warning-text: #B45309;

  /* Info Colors */
  --color-info-light: #E3F2FD;
  --color-info: #3B82F6;
  --color-info-dark: #2563EB;
  --color-info-text: #1D4ED8;

  /* Neutral Colors */
  --color-neutral-50: #FAFAFA;
  --color-neutral-100: #F5F5F5;
  --color-neutral-200: #E5E5E5;
  --color-neutral-300: #D4D4D4;
  --color-neutral-400: #A3A3A3;
  --color-neutral-500: #737373;
  --color-neutral-600: #525252;
  --color-neutral-700: #404040;
  --color-neutral-800: #262626;
  --color-neutral-900: #171717;

  /* Border Radius */
  --radius-game-sm: 8px;
  --radius-game-md: 16px;
  --radius-game-lg: 24px;
  --radius-game-full: 999px;

  /* Box Shadows */
  --shadow-game-card: 0 4px 12px rgba(0, 0, 0, 0.08);
  --shadow-game-float: 0 8px 24px rgba(255, 69, 0, 0.15);
  --shadow-game-glow: 0 0 20px rgba(255, 69, 0, 0.3);
  --shadow-game-inset: inset 0 2px 4px rgba(0, 0, 0, 0.06);

  /* Typography */
  --font-sans: 'Outfit', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;

  /* Touch Target Minimum Size */
  --spacing-touch: 44px;
}

/* Base Layer - CSS Reset and Defaults */
@layer base {
  *,
  *::before,
  *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  html,
  body {
    width: 100%;
    height: 100%;
    max-height: 100%;
    font-family: var(--font-sans);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    background-color: var(--color-game-background);
    color: var(--color-neutral-900);
    font-size: 16px;
    line-height: 1.5;
    overflow: hidden;
    /* Devvit webview sizing */
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }

  /* Dark mode support - add dark class to html for Tailwind */
  @media (prefers-color-scheme: dark) {
    html {
      color-scheme: dark;
    }
    
    html,
    body {
      background-color: var(--color-dark-base);
      color: var(--color-dark-text-primary);
    }
  }

  #root {
    width: 100%;
    height: 100%;
    max-height: 100%;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  /* Focus visible for keyboard navigation */
  :focus-visible {
    outline: 2px solid var(--color-game-primary);
    outline-offset: 2px;
  }

  /* Remove default focus outline for mouse users */
  :focus:not(:focus-visible) {
    outline: none;
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    :focus-visible {
      outline-width: 3px;
      outline-style: solid;
    }
  }

  /* Scrollbar styling */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: var(--color-neutral-300);
    border-radius: 3px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--color-neutral-400);
  }

  @media (prefers-color-scheme: dark) {
    ::-webkit-scrollbar-thumb {
      background: var(--color-neutral-600);
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--color-neutral-500);
    }
  }
}

/* Components Layer - Reusable component styles */
@layer components {
  /* Skip link for accessibility */
  .skip-link {
    position: absolute;
    top: -100%;
    left: 0;
    z-index: 50;
    background-color: var(--color-game-primary);
    color: white;
    padding: 0.5rem 1rem;
    border-radius: var(--radius-game-sm);
    transition: top 0.2s;
  }

  .skip-link:focus {
    top: 0;
  }

  /* App container */
  .app-container {
    width: 100%;
    height: 100%;
    max-height: 100%;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    position: relative;
    /* Use transparent so child views control their own backgrounds */
    background-color: transparent;
  }

  /* Screen reader only - visually hidden but accessible */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Screen reader only but focusable */
  .sr-only-focusable:focus,
  .sr-only-focusable:active {
    position: static;
    width: auto;
    height: auto;
    padding: inherit;
    margin: inherit;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }

  /* ARIA live region styles - ensure they don't affect layout */
  [aria-live="polite"],
  [aria-live="assertive"] {
    contain: layout;
  }

  /* Ensure disabled elements are clearly indicated */
  [aria-disabled="true"],
  [disabled] {
    cursor: not-allowed;
    opacity: 0.6;
  }

  /* Selection highlight for better visibility */
  ::selection {
    background-color: var(--color-game-primary);
    color: white;
  }
}

/* Utilities Layer - Custom utilities */
@layer utilities {
  /* Touch-friendly sizing */
  .touch-target {
    min-height: var(--spacing-touch);
    min-width: var(--spacing-touch);
  }

  .min-h-touch {
    min-height: var(--spacing-touch);
  }

  .min-w-touch {
    min-width: var(--spacing-touch);
  }

  /* Safe area padding for mobile devices */
  .safe-area-inset-bottom {
    padding-bottom: env(safe-area-inset-bottom, 0);
  }

  .safe-area-inset-top {
    padding-top: env(safe-area-inset-top, 0);
  }

  /* Text truncation */
  .truncate-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .truncate-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Game-specific utilities */
  .game-gradient {
    background: linear-gradient(135deg, var(--color-game-primary) 0%, var(--color-game-accent) 100%);
  }

  .game-gradient-subtle {
    background: linear-gradient(180deg, var(--color-game-background) 0%, white 100%);
  }

  /* Border radius utilities */
  .rounded-game-sm {
    border-radius: var(--radius-game-sm);
  }

  .rounded-game-md {
    border-radius: var(--radius-game-md);
  }

  .rounded-game-lg {
    border-radius: var(--radius-game-lg);
  }

  .rounded-game-full {
    border-radius: var(--radius-game-full);
  }

  /* Shadow utilities */
  .shadow-game-card {
    box-shadow: var(--shadow-game-card);
  }

  .shadow-game-float {
    box-shadow: var(--shadow-game-float);
  }

  .shadow-game-glow {
    box-shadow: var(--shadow-game-glow);
  }

  .shadow-game-inset {
    box-shadow: var(--shadow-game-inset);
  }

  /* Color utilities */
  .bg-game-primary {
    background-color: var(--color-game-primary);
  }

  .bg-game-primary-hover {
    background-color: var(--color-game-primary-hover);
  }

  .bg-game-primary-light {
    background-color: var(--color-game-primary-light);
  }

  .bg-game-accent {
    background-color: var(--color-game-accent);
  }

  .bg-game-background {
    background-color: var(--color-game-background);
  }

  @media (prefers-color-scheme: dark) {
    .bg-game-background {
      background-color: var(--color-dark-base);
    }
  }

  .bg-game-background-dark {
    background-color: var(--color-game-background-dark);
  }

  .bg-game-card {
    background-color: var(--color-game-card);
  }

  .bg-game-card-dark {
    background-color: var(--color-game-card-dark);
  }

  .text-game-primary {
    color: var(--color-game-primary);
  }

  .text-game-accent {
    color: var(--color-game-accent);
  }

  .bg-success {
    background-color: var(--color-success);
  }

  .bg-success-light {
    background-color: var(--color-success-light);
  }

  .text-success {
    color: var(--color-success);
  }

  .text-success-text {
    color: var(--color-success-text);
  }

  .bg-error {
    background-color: var(--color-error);
  }

  .bg-error-light {
    background-color: var(--color-error-light);
  }

  .text-error {
    color: var(--color-error);
  }

  .text-error-text {
    color: var(--color-error-text);
  }

  .bg-warning {
    background-color: var(--color-warning);
  }

  .bg-warning-light {
    background-color: var(--color-warning-light);
  }

  .text-warning {
    color: var(--color-warning);
  }

  .bg-info {
    background-color: var(--color-info);
  }

  .bg-info-light {
    background-color: var(--color-info-light);
  }

  .text-info {
    color: var(--color-info);
  }

  /* Note: Neutral color utilities (bg-neutral-*, text-neutral-*, border-neutral-*) 
     are handled by Tailwind's built-in utilities.
     We don't override them here to allow dark: variants to work properly */

  /* Focus ring utilities */
  .focus\:ring-game-primary:focus {
    --tw-ring-color: var(--color-game-primary);
  }

  .ring-game-primary {
    --tw-ring-color: var(--color-game-primary);
  }
}


/* Toast animation */
@keyframes slide-up {
  from {
    opacity: 0;
    transform: translate(-50%, 20px);
  }
  to {
    opacity: 1;
    transform: translate(-50%, 0);
  }
}

.animate-slide-up {
  animation: slide-up 0.3s ease-out forwards;
}
